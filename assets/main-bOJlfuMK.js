import{s as o}from"./supabaseClient-BLHyOY-m.js";document.querySelector(".js-login-button").addEventListener("click",async()=>{const e=document.querySelector(".js-User-Name").value,n=document.querySelector(".js-User-Password").value;try{const{data:r,error:l}=await o.auth.signInWithPassword({email:e,password:n});if(l){alert("Incorrect username or password. Please try again."),console.error("Login error:",l);return}const t=r.user,{data:a,error:c}=await o.from("user_list").select("role").eq("emailAddress",t.email);if(c){console.error("Error fetching user role:",c);return}const{data:i}=await o.from("user_list").select("name").eq("emailAddress",t.email);if(i.forEach(s=>{const u=s.name;sessionStorage.setItem("loggedInUserNameOnly",JSON.stringify(u))}),a&&a.length>0){const s=a[0].role;sessionStorage.setItem("loggedInUser",JSON.stringify(t.email)),setTimeout(()=>{s==="PM"||s==="VP"?window.location.href="pmPage.html":s==="Admin"&&(window.location.href="/src/adminPage.html")},500)}}catch(r){console.error("An unexpected error occurred:",r)}});document.querySelector(".js-forgot-password").addEventListener("click",async()=>{const e=document.querySelector(".js-User-Name").value;d(e)});async function d(e){const{data:n,error:r}=await o.auth.resetPasswordForEmail(e,{redirectTo:"https://testomegatools.github.io/qc-dashboard2/resetPassword.html"});r?(console.error("Error sending password reset email."),alert("An error occured. Please try again later")):alert("Password reset email sent successfully. Please check your inbox.")}
