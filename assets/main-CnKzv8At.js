import{s as n}from"./supabaseClient-BIyfXb2b.js";document.querySelector(".js-login-button").addEventListener("click",async()=>{const c=document.querySelector(".js-User-Name").value,i=document.querySelector(".js-User-Password").value;try{const{data:e,error:s}=await n.auth.signInWithPassword({email:c,password:i});if(s){alert("Incorrect username or password. Please try again."),console.error("Login error:",s);return}const t=e.user,{data:r,error:a}=await n.from("user_list").select("role").eq("emailAddress",t.email);if(a){console.error("Error fetching user role:",a);return}if(r&&r.length>0){const o=r[0].role;sessionStorage.setItem("loggedInUser",JSON.stringify(t.email)),o==="PM"||o==="VP"?window.location.href="pmPage.html":o==="Admin"&&(window.location.href="/src/adminPage.html")}}catch(e){console.error("An unexpected error occurred:",e)}});
