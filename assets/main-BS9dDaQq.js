import{s as n}from"./supabaseClient-BLHyOY-m.js";document.querySelector(".js-login-button").addEventListener("click",async()=>{const i=document.querySelector(".js-User-Name").value,c=document.querySelector(".js-User-Password").value;try{const{data:e,error:s}=await n.auth.signInWithPassword({email:i,password:c});if(s){alert("Incorrect username or password. Please try again."),console.error("Login error:",s);return}const t=e.user,{data:r,error:a}=await n.from("user_list").select("role").eq("emailAddress",t.email);if(a){console.error("Error fetching user role:",a);return}if(r&&r.length>0){const o=r[0].role;sessionStorage.setItem("loggedInUser",JSON.stringify(t.email)),setTimeout(()=>{o==="PM"||o==="VP"?window.location.href="pmPage.html":o==="Admin"&&(window.location.href="/src/adminPage.html")},500)}}catch(e){console.error("An unexpected error occurred:",e)}});
