import{s as t}from"./supabaseClient-BLHyOY-m.js";document.querySelector(".js-login-button").addEventListener("click",async()=>{const i=document.querySelector(".js-User-Name").value,l=document.querySelector(".js-User-Password").value;try{const{data:r,error:a}=await t.auth.signInWithPassword({email:i,password:l});if(a){alert("Incorrect username or password. Please try again."),console.error("Login error:",a);return}const s=r.user,{data:o,error:n}=await t.from("user_list").select("role").eq("emailAddress",s.email);if(n){console.error("Error fetching user role:",n);return}const{data:c}=await t.from("user_list").select("name").eq("emailAddress",s.email);if(c.forEach(e=>{const u=e.name;sessionStorage.setItem("loggedInUserNameOnly",JSON.stringify(u))}),o&&o.length>0){const e=o[0].role;sessionStorage.setItem("loggedInUser",JSON.stringify(s.email)),setTimeout(()=>{e==="PM"||e==="VP"?window.location.href="pmPage.html":e==="Admin"&&(window.location.href="/src/adminPage.html")},500)}}catch(r){console.error("An unexpected error occurred:",r)}});
